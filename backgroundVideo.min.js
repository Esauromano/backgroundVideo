!function(o,i,t,s){"use strict";function n(i,t){function s(){n.options.originalVideoW=n.options.$video[0].videoWidth,n.options.originalVideoH=n.options.$video[0].videoHeight,n.init()}var n=this;this.element=i,this.options=o.extend({},r,t),this._defaults=r,this._name=e,this.options.$video=o(i),this.detectBrowser(),this.options.has3d=this.detect3d(),this.options.$videoWrap.css("overflow","hidden"),this.options.$video.on("canplay canplaythrough",s),this.options.$video[0].readyState>3&&s()}var e="backgroundVideo",r={$videoWrap:o("#video-wrap"),$outerWrap:o(i),$window:o(i),minimumVideoWidth:400,preventContextMenu:!1,parallax:!0,parallaxOptions:{offset:0,effect:.5},pauseVideoOnViewLoss:!0};n.prototype={init:function(){var o=this;this.options.$window.resize(function(){o.videoCover(o.options.$video,o.options.$videoWrap)}),this.options.parallax&&o.parallaxScroll(this.options.$video),this.options.pauseVideoOnViewLoss&&this.playPauseVideo(),this.options.preventContextMenu&&this.options.$video.on("contextmenu",function(){return!1}),this.options.$window.trigger("resize")},detect3d:function(){var o,n,e=t.createElement("p"),r={WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MSTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};t.body.insertBefore(e,t.body.lastChild);for(o in r)e.style[o]!==s&&(e.style[o]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",n=i.getComputedStyle(e).getPropertyValue(r[o]));return n!==s?"none"!==n:!1},detectBrowser:function(){var o=navigator.userAgent.toLowerCase();o.indexOf("chrome")>-1||o.indexOf("safari")>-1?(this.options.browser="webkit",this.options.browserPrexix="-webkit-"):o.indexOf("firefox")>-1?(this.options.browser="firefox",this.options.browserPrexix="-moz-"):-1!==o.indexOf("MSIE")||o.indexOf("Trident/")>0?(this.options.browser="ie",this.options.browserPrexix="-ms-"):o.indexOf("Opera")>-1&&(this.options.browser="opera",this.options.browserPrexix="-o-")},videoCover:function(o,i){var t,s,n;i.width(this.options.$outerWrap.width()),i.height(this.options.$outerWrap.height()),t=this.options.$window.width()/this.options.originalVideoW,s=this.options.$window.height()/this.options.originalVideoH,n=t>s?t:s,n*this.options.originalVideoW<this.options.minimumVideoWidth&&(n=this.options.minimumVideoWidth/this.options.originalVideoW),o.width(n*this.options.originalVideoW),o.height(n*this.options.originalVideoH),this.options.$videoWrap.scrollLeft((o.width()-this.options.$window.width())/2),this.options.$videoWrap.scrollTop((o.height()-this.options.$window.height())/2)},parallaxScroll:function(i){var t,s,n,e=this;this.options.$window.on("scroll.backgroundVideoParallax",function(){o(this).scrollTop()>e.options.parallaxOptions.offset?(t=o(this).scrollTop()-e.options.parallaxOptions.offset,s=t*e.options.parallaxOptions.effect,n=e.options.has3d?"translate3d(0, "+s+"px, 0)":"translate(0, "+s+"px)",o(this).scrollTop()<e.options.$videoWrap.height()&&(i.css(e.options.browserPrexix+"transform",n),i.css("transform",n))):(n=e.options.has3d?"translate3d(0, 0, 0)":"translate(0, 0)",i.css(e.options.browserPrexix+"transform",n),i.css("transform",n))})},disableParallax:function(){this.options.$window.unbind(".backgroundVideoParallax")},playPauseVideo:function(){var i=this;this.options.$window.on("scroll.backgroundVideoPlayPause",function(){o(this).scrollTop()<i.options.$videoWrap.height()?i.options.$video.get(0).play():i.options.$video.get(0).pause()})}},o.fn[e]=function(i){return this.each(function(){o.data(this,"plugin_"+e)||o.data(this,"plugin_"+e,new n(this,i))})}}(jQuery,window,document);